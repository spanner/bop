//= require bop/hallo
//= require_tree ./jquery
@import compass/css3
@import base

body.bop_page
  margin-bottom: $closedheight + 20px

#bop_tools
  position: fixed
  bottom: $closedheight - $openheight
  left: $closedwidth - $openwidth
  height: $openheight
  width: $openwidth
  color: white
  background:
    color: $menubg
    image: image-url('bop/bg.jpg')
    position: right top
    repeat: no-repeat
  z-index: 999
  &.showing
    +box-shadow
  a
    color: white
  a.boptag
    display: block
    position: absolute
    right: 0
    top: 0
    width: $closedwidth
    height: $closedheight
    text-indent: $closedwidth
    overflow: hidden
  .pagetree
    position: relative
    width: $openwidth
    height: $openheight - 30px
    overflow: auto
    font-size: 1em
    margin-left: 20px
    margin-top: 40px
    .page
      position: relative
      .link
        display: inline-block
        height: 18px
        line-height: 18px
      .page
        padding-left: 20px
        background:
          image: image-url('bop/descent.png')
          repeat: no-repeat
          position: 0 0
    
  .files
    position: absolute
    top: 50px
    left: 20px
    right: 10px
    bottom: 60px
    
  .admin
    position: absolute
    left: 20px
    bottom: 5px

  a.adder
    background-position: 0 -120px
    &:hover, &:active
      background-position: 0 -144px

  a.remover
    background-position: 0 -624px
    &:hover, &:active
      background-position: 0 -648px

p.tabs
  a.selected
    +bold
    
#bop_status
  position: fixed
  bottom: 10px
  right: 10px
  height: $closedheight
  background:
    color: white
  
section.space
  position: relative

article.block
  position: relative
  margin: 10px 0
  min-height: 2em
  .controls
    position: absolute
    display: none
    top: 5px
    right: 5px
    height: 24px
    background-color: white
    padding: 10px
    +border-radius
  
  section
    position: absolute
    width: 810px
    top: 139px
    bottom: 0
  
  .asset_fields
    display: none

a.adder, a.editor, a.remover
  display: inline-block
  text-indent: 24px
  background: 
    image: image-url('bop/minisymbols.png')
    repeat: no-repeat
    position: 0 -24px
  &.icon
    width: 20px
    height: 20px
    overflow: hidden
  &.waiting
    color: $mid
    background:
      image: image-url('bop/spinner.gif')
      position: 0 0

a.adder
  color: $blue
  background-position: 0 -24px
  &:hover
    background-position: 0 -72px
    color: $hover
  &:active
    background-position: 0 -96px
    color: $active

a.remover
  background-position: 0 -502px
  &:hover
    background-position: 0 -574px
  &:active
    background-position: 0 -550px

a.editor
  background-position: 0 -694px
  &:hover
    background-position: 0 -742px
  &:active
    background-position: 0 -766px
      
// -------------------------------- wysihtml5 --------------------------------

.wysihtml
  border: 1px solid #EBEAE8
  textarea
    height: 1em
    position: relative
    border: none
    +light
    width: 100%
    background: transparent
    padding: 10px
    resize: none
    white-space: pre
    border-bottom-left-radius: 4px
    border-bottom-right-radius: 4px
    line-height: 1.4
    word-wrap: break-word
    -ms-box-sizing: border-box
    -webkit-box-sizing: border-box
    -moz-box-sizing: border-box
    box-sizing: border-box
    overflow: hidden
    &:focus
      box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.3)
      background: rgba(255, 255, 255, 0.4)
      outline: 0
    
  .toolbar
    position: relative
    
  iframe
    border: none !important
    overflow: hidden
  
  header
    display: block
    border-radius: 4px 4px 0 0
    width: 100%
    background: #eee
    position: relative
    z-index: 1
    background-image: linear-gradient(bottom, rgb(238, 238, 238) 0%, rgb(255, 255, 255) 100%)
    background-image: -o-linear-gradient(bottom, rgb(238, 238, 238) 0%, rgb(255, 255, 255) 100%)
    background-image: -moz-linear-gradient(bottom, rgb(238, 238, 238) 0%, rgb(255, 255, 255) 100%)
    background-image: -webkit-linear-gradient(bottom, rgb(238, 238, 238) 0%, rgb(255, 255, 255) 100%)
    background-image: -ms-linear-gradient(bottom, rgb(238, 238, 238) 0%, rgb(255, 255, 255) 100%)
    font-size: 0

  .commands
    border-left: 1px solid #ddd
    display: inline-block
    -webkit-padding-start: 0
    padding: 0

  [data-wysihtml5-command], [data-wysihtml5-action]
    position: relative
    border-right: 1px solid #ddd
    border-left: 1px solid #fff
    list-style: none
    font-size: 12px
    display: inline-block
    cursor: pointer
    height: $tool_button_height
    width: $tool_button_width

  [data-wysihtml5-command]::after, [data-wysihtml5-action]::after
    content: ""
    background-image: url(/assets/bop/spr_toolbar_icons_r1.png)
    background-repeat: no-repeat
    position: absolute
    left: 0
    right: 0
    top: 0
    bottom: 0

  [data-wysihtml5-command]:hover, [data-wysihtml5-action]:hover
    background-image: linear-gradient(bottom, rgb(229, 240, 226) 0%, rgb(255, 255, 255) 100%)
    background-image: -o-linear-gradient(bottom, rgb(229, 240, 226) 0%, rgb(255, 255, 255) 100%)
    background-image: -moz-linear-gradient(bottom, rgb(229, 240, 226) 0%, rgb(255, 255, 255) 100%)
    background-image: -webkit-linear-gradient(bottom, rgb(229, 240, 226) 0%, rgb(255, 255, 255) 100%)
    background-image: -ms-linear-gradient(bottom, rgb(229, 240, 226) 0%, rgb(255, 255, 255) 100%)

  [data-wysihtml5-command="bold"]::after
    background-position: ($tool_button_width/2 - 10px) center

  [data-wysihtml5-command="italic"]::after
    background-position: ($tool_button_width/2 - 82px) center

  [data-wysihtml5-command="insertUnorderedList"]::after
    background-position: ($tool_button_width/2 - 149px) center

  [data-wysihtml5-command="insertOrderedList"]::after
    background-position: ($tool_button_width/2 - 231px) center

  [data-wysihtml5-command="formatBlock"]
    &[data-wysihtml5-command-value="h1"]::after
      background-position: ($tool_button_width/2 - 378px) center
    &[data-wysihtml5-command-value="h2"]::after
      background-position: ($tool_button_width/2 - 462px) center

  [data-wysihtml5-command="createLink"]::after
    background-position: ($tool_button_width/2 - 305px) center

  [data-wysihtml5-command="insertImage"]::after
    background-position: ($tool_button_width/2 - 547px) center

  [data-wysihtml5-command="insertSpeech"]::after
    background-position: ($tool_button_width/2 - 630px) center

  [data-wysihtml5-action="change_view"]::after
    background-position: ($tool_button_width/2 - 704px) center


  .wysihtml5-action-active, .wysihtml5-command-active
    box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.2)
    background: #eee !important

  .wysihtml5-commands-disabled
    [data-wysihtml5-command]
      opacity: 0.2
      cursor: default
      background-image: none !important

  [data-wysihtml5-dialog]
    color: #333
    font-size: 14px
    text-align: left
    -ms-box-sizing: border-box
    -webkit-box-sizing: border-box
    -moz-box-sizing: border-box
    box-sizing: border-box
    padding: 5px 10px
    background: white
    position: relative
    label
      +bold
    input[type="text"]
      color: $blue
      border: 1px solid $pale
      padding: 3px
      width: 50%
      min-width: 100px
      &:focus
        outline: 0
        border: 1px solid #666

  [data-wysihtml5-dialog-action]
    +book
    padding: 4px
    cursor: pointer
    +border-radius(3px)

  [data-wysihtml5-dialog-action="save"]
    background: $green
    color: #fff

  [data-wysihtml5-dialog-action="cancel"]
    color: $pale
    &:hover
      color: $hover

.editable
  background:
    repeat: repeat
    position: top left
    image: image-url('bop/editable_bg.png')
  &.editing
    background-image: image-url('bop/editing_bg.png')
  